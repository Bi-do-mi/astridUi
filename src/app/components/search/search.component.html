<div class="searchDiv" fxLayout="column">
  <div>
    <form (submit)="search()">
      <!--общий поиск-->
      <mat-form-field fxFlex>
        <div fxLayout="row" fxLayoutAlign="space-between end">
          <input #autoCompleteInput type="text" aria-label="Model"
                 matInput [formControl]="searchCtrl" [matAutocomplete]="searchCmplt">
          <button class="button-color"
          type="button" matTooltip="Искать" tabindex="-1"
          matTooltipPosition="above"
          mat-icon-button type="submit">
          <mat-icon aria-label="Search icon">search</mat-icon>
          </button>
        </div>
        <mat-autocomplete #searchCmplt="matAutocomplete" (optionSelected)="search()">
          <mat-option *ngFor="let opt of searchOptions" [value]="opt">
            {{opt}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </form>
  </div>
  <div>
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Настройки поиска
          </mat-panel-title>
        </mat-expansion-panel-header>
        <!--что искать-->
        <mat-radio-group aria-label="Select a search option"
                         (change)="searchCtrl.setValue(searchCtrl.value);
                         autoCompleteInput.focus()"
                         [(ngModel)]="searchService.searchUnits">
          <mat-radio-button class="mr-4" [value]="true"
                            [checked]="searchService.searchUnits">искать технику
          </mat-radio-button>
          <mat-radio-button [value]="false">искать владельцев</mat-radio-button>
        </mat-radio-group>
        <div class="divcolor"></div>
        <!--как искать-->
        <mat-radio-group aria-label="Select a search type" [(ngModel)]="searchService.searchType">
          <mat-radio-button class="mr-4" *ngFor="let _searchType of searchService.searchTypes"
                            [value]="_searchType" [checked]="searchService.searchType === value">
            {{_searchType}}
          </mat-radio-button>
        </mat-radio-group>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="mt-3" *ngIf="((!searchService.isThereResult) && (searchService.isThereResult !== undefined))">
    Нет результатов. Попробуйте расширить зону поиска.</div>
  <div class="filtered-units-list-container" *ngIf="FilteredUnitsListTableComponent
   && searchService.searchUnits &&
   ((searchService?.filteredAllUnits | async)?.length>0)">
    <ng-container *ngComponentOutlet="FilteredUnitsListTableComponent"></ng-container>
  </div>
  <div class="filtered-users-list-container" *ngIf="FilteredUsersListTableComponent
   && !searchService.searchUnits &&
   ((searchService?.filteredUsers | async)?.length>0)">
    <ng-container *ngComponentOutlet="FilteredUsersListTableComponent"></ng-container>
  </div>
</div>
